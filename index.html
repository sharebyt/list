<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>App</title>
<link rel="stylesheet" href="https://actwu.github.io/neu/n.css"/>
<script src="https://actwu.github.io/neu/n.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
</head>

<style>
*{
--black2:#202035;
}
[foot] textarea{
padding: 0.155in;
height: 15in;
max-width: 2in;
}
a {
height: 0.1in;
padding: 0.2in 0.2in;
width: 0.in;
max-height: 0.1in;
transition: all 0.8s;
}
a:hover {
transition: all 0.8s;
height: 0.1in;
padding: 0.2in 0.25in;
scale: 1.1;
width: 0.in;
max-height: 0.1in;
}
[foot] a{
padding: 0.01in 0.01in;
max-height: 1in;
height: 0.5in;
width: 0.5in;
}
[foot]  a:hover {
transition: all 0.8s;
padding: 0.01in 0.08in;
max-height: 1in;
height: 0.5in;
width: 0.5in;
scale: 1;
}
</style>
<body>
<bg bbg></bg>
<cont row>
<p m unbound item-left>sets</p>
<a bdr="10" onmousedown="genUrl();" center gbg2>
<i g class="fa-solid fa-recycle"></i>
</a>
<a bdr='15' onmousedown="clrAll();" center rbg2>
<i r class="fa-solid fa-ban"></i>
</a>
</cont>

<cont row mid-p bbg foot>

<textarea bbg2 ondblclick="a" id="data" small-p style="height: 0.2in;"
bdr="15" light m unbound placeholder="Set something up..." flex></textarea>
<a bdr="10" center onmousedown="addLst();" lbg2>
<i l mid class="fa-solid fa-square-arrow-up-right"></i>
</a>
</cont>

<div small-mx small-mb>
<span id="datalist" small-p></span>
</div>

<cont mid>
</cont>

<script>
const uURL = (k, d) => {
let qs = `?${k}=` + encodeURIComponent(JSON.stringify(d));
history.replaceState(null, '', qs);
}

const lURL = k => {
const up = new URLSearchParams(window.location.search);
let d = up.get(k);
if (d) {
return JSON.parse(decodeURIComponent(d));
}
return [];
}

const sLoc = (k, d) => {
localStorage.setItem(k, JSON.stringify(d));
}

const lLoc = k => {
const d = localStorage.getItem(k);
if (d) {
return JSON.parse(d);
}
return [];
}

const addLst = () => {
const v = document.querySelector('#data').value;
if (v !== '' && v.trim() !== '') {
const id = ran(9e4);
el({name: 'cont', par: '#datalist', at: 'bbg2', id: `d${id}`});
elAt({name: `#d${id}`, at: 'small-m'});
elAt({name: `#d${id}`, at: 'bdr', val: '15'});
elAt({name: `#d${id}`, at: 'flex'});
elAt({name: `#d${id}`, at: 'list'});
el({name: 'p', val: v, at: 'unbound', par: `#d${id}`, id: `a${id}i`});
elAt({name: `#a${id}i`, at: 'm'});

document.querySelector('#data').value = '';
let data = gLst();
uURL('list', data);
sLoc('savedList', data);
}
}

const gLst = () => {
let data = [];
document.querySelectorAll('#datalist cont').forEach(cont => {
data.push(cont.querySelector('p').innerText);
});
return data;
}

const genUrl = () => {
let base = window.location.origin + window.location.pathname;
let data = gLst();
let qs = '?list=' + encodeURIComponent(JSON.stringify(data));
let shareUrl = base + qs;
navigator.clipboard.writeText(shareUrl).then(() => {
alert('Shareable URL copied to clipboard');
});
}

const lLst = () => {
let data = lURL('list');
if (!data.length) {
data = lLoc('savedList');
}
data.forEach(item => {
const id = ran(9e4);
el({name: 'cont', par: '#datalist', at: 'bbg2', id: `d${id}`});
elAt({name: `#d${id}`, at: 'small-m'});
elAt({name: `#d${id}`, at: 'mid-p'});
elAt({name: `#d${id}`, at: 'bdr', val: '15'});
elAt({name: `#d${id}`, at: 'flex'});
elAt({name: `#d${id}`, at: 'list'});
el({name: 'p', val: item, at: 'unbound', par: `#d${id}`, id: `a${id}i`});
elAt({name: `#a${id}i`, at: 'm'});
});
}

const toggleDone = cont => {
const isDone = cont.hasAttribute('gbg');

if (isDone) {
cont.removeAttribute('gbg');
cont.setAttribute('bbg2', '');
} else {
cont.removeAttribute('bbg2');
cont.setAttribute('gbg', '');
}

let data = gLst();
uURL('list', data);
sLoc('savedList', data);
}

const delItem = id => {
const cont = document.querySelector(`#d${id}`);
if (cont) {
cont.remove();
let data = gLst();
data = data.filter(i => i !== cont.querySelector('p').innerText);
uURL('list', data);
sLoc('savedList', data);
}
}

const clrAll = () => {
document.querySelectorAll('#datalist cont').forEach(cont => cont.remove());
uURL('list', []);
sLoc('savedList', []);
}

document.getElementById('data').addEventListener('keydown', e => {
if (e.key === 'Enter') {
e.preventDefault();
addLst();
}
});

document.addEventListener('click', e => {
if (e.target.tagName === 'CONT' && e.target.hasAttribute('list')) {
toggleDone(e.target);
}
});

document.addEventListener('dblclick', e => {
if (e.target.tagName === 'CONT' && e.target.hasAttribute('list')) {
delItem(e.target.id.replace('d', ''));
}
});

window.onload = lLst;
//MADE BY QEW AI (FUTR)
</script>
</body>
</html>
